## [Codeforces Round #665 (Div. 2)](https://codeforces.com/contest/1401)


### D：用 dfs 变成有根树，求出每条边的权重，存在第二次到达的节点上，然后给权重高的边赋大值即可


### E

先算左横线段，再算右横线段，左横线段被退出的时候对应位置加 `-1` 即可，然后根据竖线从左到右依次加入右横线段，剔除左横线段。用树状数组计算一下就可以了。

> 注意如果横竖直线有触碰到两端，那么答案对应要 `+1`。
> 注意到如果数据范围很大（例如 `N = 1e9`）那么可以压缩一下达到目的。
