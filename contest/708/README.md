## [AIM Tech Round 3 (Div. 1)](https://codeforces.com/contest/708)

### C：经典换根 DP

题意：是否能过通过一次调整（删一条边，加一条边）使得删除该点后的最大连通分支节点个数不超过 $\frac{n}{2}$

做法：首先考虑节点 1 为根，如果所有与 1 相连的子树的节点数均不超过 $\frac{n}{2}$，那么不用操作，已经可以作为重心了，否则最多只有一个子树的节点数大于 $\frac{n}{2}$，那么我们需要在这个子树中找一个节点个数不超过 $\frac{n}{2}$ 的子树，把它删了然后剩下的节点个数还要不超过 $\frac{n}{2}$（自然删节点最多的那个）。所以需要预处理出这个值。然后需要考虑换根（状态转移）。现在假设 fa 的结果已经搞定了，我们要看它的儿子节点 u，如果 u 的所有儿子的节点数都小于 $\frac{n}{2}$，那么我们要看 `sz[1] - sz[u]` 是否也小于 $\frac{n}{2}$，如果是不用操作了，否则，我们就要看抛弃以 v 为节点的子树后，整棵树节点不超过 $\frac{n}{2}$ 的最大子树（为此，我们需要预处理最大子儿子和次大子儿子）。如果 u 有个儿子节点数大于 $\frac{n}{2}$，那么和 1 一样判断即可。