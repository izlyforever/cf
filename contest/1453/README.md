## [Codeforces Round #688 (Div. 2)](https://codeforces.com/contest/1453)

### D：简单概率题

> 这么简答的概率题，我竟然做了一个小时，被弱智的错误理解题意搞的头皮发麻！

题意：对一个长度为 $n$ 的 0-1 序列（首位为 1），`0` 表示不存档 `1` 表示存档，如果我们在第 `i` 关打赢了，那么我们进入第 `i + 1` 关，否则我们回到最近的一次存档处。那么战斗次数的期望就确定的。现在问题是期望值 $k$，能否给一个 $0-1$ 序列。

首先如果 $n = 1$，那么此时期望为 $\displaystyle \sum_{i = 1}^n \frac{i}{2^i} = 2$. 注意到如果 `a[i] = 1`，一旦到达 `i` 位置，那么期望与前面的部分就无关了。所以其实我们只需考虑序列 `10...0`。记期望为 $p_n$。那么

$$
p_n = \sum_{i = 1}^n \frac{i + p_n}{2^i} + \frac{n}{2^n}
$$

化简可得 $p_n = 2 (2^n - 1)$. 因此只要 k 是 2 的倍数，必然序列存在。