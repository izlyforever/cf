# [Codeforces Round #728 (Div. 1)](https://codeforces.com/contest/1540)

## A: 可有负边但无负环的简单有向图

根据每个点到 1 的距离，确定出所有合理的图中的边权值最小的权值。

一个直观的做法就是排序，然后连成一条线，然后就可以有特别多的负边可以加了（证明？下次一定）

## B：

首先确定根节点，然后求逆序对，我们只关注即可$(i, j), i > j$ 即可。然后如果 $i$ 是 $j$ 的祖先，那么就没有贡献，如果 $i$ 是 $j$ 的祖先，贡献为 1（其实可以不特判，直接找他们的 lca），否则我们找出 $i, j$ 的 lca $x$，然后根据他们到 lca 的距离$d_i = dep[i] - dep[x], d_j = dep[j] - dep[x]$，就可以知道先 $i$ 后 $j$ 出现的概率为

$$
\sum_{k = 0}^{d_j - 1} \binom{d_i - 1 + k}{k} (\frac{1}{2})^{d_i + n}
$$

> 1:59 分做出来了，开心，虽然这场是 2:15 的

## C：极限问题

注意到 
$$
\frac{a_i+a_{i+1}-b_i}{2} \geq a_i \Leftrightarrow \frac{a_i+a_{i+1}+b_i}{2} \leq a_{i + 1}
$$
所以整个过程中 $\sum a_i$ 是定值，且有
$$
\lim a_{i + 1} \geq b_i + \lim a_i
$$
注意到 $a_1$ 只加不减，$a_n$ 只减不加，所以我们要从后往前看，因为后面一旦稳定了就稳定了

> 可惜答案要我们做的是计数，吐了
